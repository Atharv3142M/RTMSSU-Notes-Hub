<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Drive Files</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>ðŸ“‚ My Shared Files</h1>
  </header>

  <main>
    <div id="file-list" class="grid"></div>
  </main>

  <footer>
    <p>Powered by Google Drive API | Hosted on GitHub Pages</p>
  </footer>

  <script>
    const API_KEY = "AIzaSyBTVp15nqxHBEBrL8g3BQlJyWGmUgIrjjA";
    const FOLDER_ID = "1YJ416WrYlXCWmFtCXJpxV3x1sjtwXegq";

    async function listFiles() {
      const url = `https://www.googleapis.com/drive/v3/files?q='${FOLDER_ID}'+in+parents&key=${API_KEY}&fields=files(id,name,mimeType,thumbnailLink,webViewLink)`;

      try {
        const res = await fetch(url);
        const data = await res.json();
        const fileList = document.getElementById("file-list");

        if (!data.files || data.files.length === 0) {
          fileList.innerHTML = "<p>No files found in this folder.</p>";
          return;
        }

        data.files.forEach(file => {
          const card = document.createElement("div");
          card.className = "card";

          card.innerHTML = `
            <img src="${file.thumbnailLink || "https://via.placeholder.com/150"}" alt="File Preview">
            <h3>${file.name}</h3>
            <a href="${file.webViewLink}" target="_blank">View File</a>
          `;

          fileList.appendChild(card);
        });
      } catch (error) {
        console.error("Error fetching files:", error);
        document.getElementById("file-list").innerHTML = "<p>Error loading files. Check API key or folder permissions.</p>";
      }
    }

    listFiles();
  </script>
</body>
</html>
